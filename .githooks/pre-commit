#!/bin/sh
# Pre-commit hook - runs tests and security checks before committing

cd MyRecipeApp

echo "ğŸ” Running pre-commit checks..."

# Run tests
echo "ğŸ“ Running tests..."
npm test -- --passWithNoTests --bail
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Commit aborted."
  exit 1
fi

# Run security audit
echo "ğŸ”’ Running security audit..."
npm run security
if [ $? -ne 0 ]; then
  echo "âš ï¸  Security audit found issues"
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
exit 0
